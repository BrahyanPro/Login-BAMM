var v=Object.defineProperty;var O=(a,e,r)=>e in a?v(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r;var l=(a,e,r)=>(O(a,typeof e!="symbol"?e+"":e,r),r);import{a as m,j as g,r as p,L as N,b as S,c as I,R as y,S as C,d as f,e as w,f as L}from"./vendor.e30ea743.js";const b=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}};b();const A=a=>m.post("http://localhost:4000/login",a).then(e=>e.status),t=g.exports.jsx,s=g.exports.jsxs,_=({message:a})=>t("div",{children:s("div",{className:"alert alert-success",role:"alert",children:[t("span",{className:"glyphicon glyphicon-thumbs-up"}),t("span",{className:"message",children:a})]})}),R=({message:a})=>t("div",{children:s("div",{className:"alert alert-danger",role:"alert",children:[t("span",{className:"glyphicon glyphicon-thumbs-down"}),t("span",{className:"message",children:a})]})}),c={FIRST_NAME:"First Name",LAST_NAME:"Last Name",REGISTER:"Register",CANCEL:"Cancel",REGISTRATION_HEADING:"Sign Up"},x="Registered Successfully",G="Error in Registration",T="Login Successful",U="Error in Login",d={USER_NAME:"Username",PASSWORD:"Password"},E={LOGIN:"Iniciar sesion",LOGIN_HEADING:"Login"};const M="http://localhost:4000/register",P="http://localhost:4000/validateUsername",D="/register",h={register:"/register",login:"/login",base:"/"};class F extends p.exports.Component{constructor(e){super(e);l(this,"handleOnChangeUserName",e=>{this.setState({user_name:e.target.value})});l(this,"handleOnChangePassword",e=>{this.setState({password:e.target.value})});l(this,"onSubmit",async e=>{const r={user_name:this.state.user_name,password:this.state.password};await A(r)!==200?this.setState({error:!0,loginSuccess:!1}):this.setState({loginSuccess:!0,error:!1})});this.state={user_name:"",password:"",error:!1,loginSuccess:!1}}render(){const{loginSuccess:e,error:r}=this.state;return s("div",{className:"login",children:[s("h1",{children:[" ",E.LOGIN_HEADING," "]})," "," "," ",s("form",{onSubmit:this.onSubmit,children:[s("div",{children:[s("div",{className:"fields",children:[s("p",{children:[" ",d.USER_NAME," "]})," "," "," "," "," "," ",t("input",{type:"text",name:"Username",onChange:this.handleOnChangeUserName,autoComplete:"Username",required:!0})]})," "," "," "," ",s("div",{className:"fields",children:[" "," "," ",s("p",{children:[" ",d.PASSWORD," "]})," "," "," "," "," "," ",t("input",{type:"password",name:"Password",onChange:this.handleOnChangePassword,autoComplete:"Password",required:!0})," "," "," "," "," "]})," "," "," "," ",s("div",{className:"buttons",children:[" "," "," ",s("button",{type:"button",onClick:this.onSubmit,className:"btn btn-primary btn-sm",children:[" "," "," "," ",E.LOGIN," "," "," "," "," "]})," "," ",s(N,{to:D,children:[" ",c.REGISTER," "]})," "," "," "," "," "," "]})," "," "," "," "]})," "," "," "," "]})," "," ",e&&t(_,{message:T})," "," "," "," "," "," ",r&&t(R,{message:U})," "," "," "," "," "," "]})}}const j=a=>{const e=a.password,r=S.genSaltSync(10),o=S.hashSync(e,r);return a.password=o,m.post(M,a).then(n=>n.status)},k=a=>m.post(P,a).then(e=>e.status);class q extends p.exports.Component{constructor(e){super(e);l(this,"handleOnChangeFirstName",e=>{this.setState({first_name:e.target.value})});l(this,"handleOnChangeLastName",e=>{this.setState({last_name:e.target.value})});l(this,"handleOnChangeUserName",e=>{this.setState({user_name:e.target.value})});l(this,"handleOnChangePassword",e=>{this.setState({password:e.target.value})});l(this,"handleOnBlur",async e=>{this.setState({user_name:e.target.value});const r={user_name:this.state.user_name};await k(r)===204?this.setState({user_name_taken:!0}):this.setState({user_name_taken:!1})});l(this,"onSubmit",async e=>{e.preventDefault();const r={first_name:this.state.first_name,last_name:this.state.last_name,user_name:this.state.user_name,password:this.state.password};await j(r)===200?this.setState({first_name:"",last_name:"",user_name:"",password:"",register:!0,error:!1}):this.setState({error:!0,register:!1})});this.state={first_name:"",last_name:"",user_name:"",password:"",register:!1,error:!1}}render(){const{register:e,error:r,user_name_taken:o}=this.state;return s("div",{className:"register",children:[s("h1",{children:[" ",c.REGISTRATION_HEADING," "]})," ",s("form",{onSubmit:this.onSubmit,children:[s("div",{children:[s("div",{className:"fields",children:[s("p",{children:[" ",c.FIRST_NAME," "]})," "," "," ",t("input",{type:"text",value:this.state.first_name,name:"FirstName",onChange:this.handleOnChangeFirstName})," "," "," "]})," ",s("div",{className:"fields",children:[" ",s("p",{children:[" ",c.LAST_NAME," "]})," "," "," ",t("input",{type:"text",value:this.state.last_name,name:"LastName",onChange:this.handleOnChangeLastName})," "," "," "]})," ",s("div",{className:"fields",children:[" ",s("p",{children:[" ",d.USER_NAME," "]})," "," "," ",t("input",{type:"text",className:I({error:o}),value:this.state.user_name,name:"Username",onBlur:this.handleOnBlur,onChange:this.handleOnChangeUserName,autoComplete:"Username",required:!0})]})," ",s("div",{className:"fields",children:[" ",s("p",{children:[" ",d.PASSWORD," "]})," "," "," ",t("input",{type:"password",value:this.state.password,name:"Password",onChange:this.handleOnChangePassword,autoComplete:"password",required:!0})]})," ",s("div",{className:"buttons",children:[" ",s("button",{type:"submit",className:"btn btn-primary",disabled:o,children:[" "," "," ",c.REGISTER," "," "," "]})," "," "," ",s(N,{to:"/login",children:[" ",c.CANCEL," "]})," "," "," "]})," "," "," "]})," "," "]})," "," "," ",r&&t(R,{message:G})," "," "," ",e&&t(_,{message:x})," "," "," "]})}}class B extends p.exports.Component{render(){return t(y,{children:t("div",{className:"App",children:s(C,{children:[t(f,{exact:!0,path:h.register,component:q}),t(f,{exact:!0,path:h.login,component:F}),t(w,{from:h.base,to:h.login})]})})})}}L.render(t(B,{}),document.getElementById("root"));
